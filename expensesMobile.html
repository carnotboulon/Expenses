<!DOCTYPE html> 
<html> 
<head> 
	<title>Add expense</title> 	
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    
    <link rel="stylesheet" href="./resources/css/expenses.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="./resources/JS/summaryExpenses.js"></script>
</head> 

<body>
<!-- Start of first page -->
    <div data-role="page">
        
        <div data-role="header" data-position="fixed" data-theme="a">
            <h1>Expenses</h1>
            <div data-role="navbar" data-position="fixed">
                <ul>
                    <li><a href="/" rel="external" class="ui-btn-active">Summary</a></li>
                    <li><a href="/balance" rel="external">Balance</a></li>
                    <li><a href="/add" rel="external">Add</a></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /header -->
        
        <div data-role="content">
        
            <div data-role="popup" id="popupDialog" data-overlay-theme="b" data-theme="b" data-dismissible="false" style="max-width:400px;">
                <div data-role="header" data-theme="a">
                <h1>Delete Page?</h1>
                </div>
                <div role="main" style="text-align:center" class="ui-content">
                    <h3 class="ui-title">Are you sure you want to delete</h3>
                    <h3 id="delExpense"></h3>
                    
                    <p>This action cannot be undone.</p>
                    <a href="#" id="cancelBtn" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Cancel</a>
                    <a href="/" id="deleteBtn" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back" data-transition="flow">Delete</a>
                </div>

            </div>

            <table data-role="table" id="table-column-toggle" data-mode="columntoggle" class="ui-responsive table-stripe ui-body-d ui-shadow">
            <thead>
                <tr>
                    <th data-priority="3">Date</th>
                    <th data-priority="5">Shop</th>
                    <th data-priority="5">Category</th>
                    <th>What?</th>
                    <th data-priority="1">Price</th>
                    <th data-priority="2">Bought by?</th>
                    <th data-priority="3">Bought for?</th>
                    <th data-priority="4">Paid with?</th>
                    <th data-priority="6">Recorded By</th>
                    <th data-priority="6">Recorded On</th>
                </tr>
            </thead>
                       
            <tbody>
            {% for expense in expenses %}
                <tr id="{{ expense.id }}">
                    <td class="date">{{ expense.date.strftime('%d %b %y') }}</td>
                    <td class="shop">{{ expense.shop.name }}</td>
                    <td class="cat">{{ expense.categories|join(', ',attribute="name") }}</td>
                    <td class="object">{{ expense.object }}</td>
                    <td class="price">{{ expense.price }}</td>
                    <td class="buyers">{{ expense.buyers|join(', ',attribute="firstName") }} </td>
                    <td class="benefs">{{ expense.beneficiaries|join(', ',attribute="firstName") }} </td>
                    <td class="account">{{ expense.account.name }}</td>
                    <td class="recordedBy">{{ expense.recordedBy.firstName }}</td>
                    <td class="recordedOn">{{ expense.recordedOn.strftime('%d %b %y %H:%M') }}</td>
                </tr>
                 
            {% endfor %}
            </tbody>
            </table>
        </div>
        
        <div data-role="footer" data-position="fixed" data-theme="a">
            <h4>B&amp;P</h4>
        </div><!-- /footer -->
        
</div><!-- /page -->    
    
</body>
</html>
